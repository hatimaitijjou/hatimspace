<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatim Space | Organizing my time</title>
    <style>
        :root { --primary: #00ff41; --bg: #0a0a0a; --toolbar: #161616; --page: #ffffff; --chat-bg: #111; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; display: flex; flex-direction: column; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ */
        #login-screen {
            position: fixed; inset: 0; background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
            z-index: 10000; display: flex; align-items: center; justify-content: center;
        }
        .login-card {
            background: rgba(20, 20, 20, 0.9); padding: 40px; border-radius: 20px;
            border: 1px solid #333; text-align: center; width: 350px; backdrop-filter: blur(10px);
        }
        .login-card input { width: 100%; padding: 14px; margin: 10px 0; border-radius: 8px; border: 1px solid #333; background: #000; color: white; outline: none; }
        .btn-entry { width: 100%; padding: 14px; background: var(--primary); color: #000; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .toolbar { background: var(--toolbar); padding: 10px 20px; display: flex; gap: 10px; border-bottom: 1px solid #333; align-items: center; z-index: 10; }
        .t-btn { background: #222; border: 1px solid #444; color: white; padding: 8px 12px; border-radius: 6px; cursor: pointer; transition: 0.2s; }
        .t-btn:hover { background: var(--primary); color: black; }

        /* ØªØ®Ø·ÙŠØ· Ø§Ù„Ø¹Ù…Ù„ ÙˆØ§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .main-container { flex: 1; display: flex; overflow: hidden; position: relative; }
        
        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù…Ø­Ø±Ø± (Word) */
        .workspace { flex: 1; padding: 40px; overflow-y: auto; background: #1a1a1a; display: flex; justify-content: center; position: relative; }
        #editor {
            width: 100%; max-width: 800px; min-height: 1000px; background: var(--page); color: #222;
            padding: 60px; box-shadow: 0 0 40px rgba(0,0,0,0.5); outline: none; border-radius: 4px; font-size: 18px; line-height: 1.8;
        }

        /* Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
        #chat-sidebar {
            width: 320px; background: var(--chat-bg); border-right: 1px solid #333;
            display: flex; flex-direction: column; transition: 0.3s;
        }
        .chat-header { padding: 15px; background: #1a1a1a; border-bottom: 1px solid #333; font-weight: bold; color: var(--primary); display: flex; justify-content: space-between; }
        #chat-messages { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg { background: #222; padding: 10px; border-radius: 10px; font-size: 0.9rem; border-right: 3px solid var(--primary); }
        .msg b { color: var(--primary); display: block; font-size: 0.7rem; margin-bottom: 3px; }
        .chat-input-area { padding: 15px; display: flex; gap: 5px; border-top: 1px solid #333; }
        #chat-input { flex: 1; background: #000; border: 1px solid #333; color: white; padding: 8px; border-radius: 5px; outline: none; }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø§Ø´ */
        #slash-menu {
            position: absolute; background: #1a1a1a; border: 1px solid var(--primary);
            border-radius: 10px; width: 250px; display: none; z-index: 1000; padding: 8px;
        }
        .slash-item { padding: 10px; cursor: pointer; border-radius: 8px; display: flex; align-items: center; gap: 10px; }
        .slash-item:hover { background: var(--primary); color: black; }

        footer { background: #000; padding: 10px 40px; border-top: 1px solid #222; display: flex; justify-content: space-between; font-size: 0.8rem; color: #555; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-card">
            <h2 style="color:var(--primary)">HATIM SPACE PRO</h2>
            <input type="text" id="user-name" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„Ù…Ø³ØªØ¹Ø§Ø± Ù„Ù„Ø¯Ø±Ø¯Ø´Ø©">
            <input type="password" id="pass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (1234)">
            <button class="btn-entry" onclick="login()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ù†ØµØ©</button>
        </div>
    </div>

    <header class="toolbar">
        <div style="font-weight:bold; color:var(--primary); margin-left: 20px;">ğŸª HATIM SPACE</div>
        <button class="t-btn" onclick="f('bold')"><b>B</b></button>
        <button class="t-btn" onclick="f('italic')"><i>I</i></button>
        <button class="t-btn" onclick="f('insertUnorderedList')">â€¢ Ù‚Ø§Ø¦Ù…Ø©</button>
        <button class="t-btn" onclick="saveDoc()" style="background:#007bff">ğŸ“¥ ØªØ­Ù…ÙŠÙ„</button>
        <button class="t-btn" onclick="toggleChat()" id="chat-toggle">ğŸ’¬ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</button>
        <button class="t-btn" onclick="location.reload()" style="background:#bd2130; margin-right: auto;">ğŸšª Ø®Ø±ÙˆØ¬</button>
    </header>

    <div class="main-container">
        <div id="chat-sidebar">
            <div class="chat-header"><span>Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</span> <small id="online-status">ğŸŸ¢ Ù…ØªØµÙ„</small></div>
            <div id="chat-messages">
                <div class="msg"><b>Ø§Ù„Ù†Ø¸Ø§Ù…</b> Ø£Ù‡Ù„Ø§Ù‹ Ø¨ÙƒÙ… ÙÙŠ Ø¯Ø±Ø¯Ø´Ø© Hatim Space!</div>
            </div>
            <div class="chat-input-area">
                <input type="text" id="chat-input" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©..." onkeypress="if(event.key==='Enter') sendMsg()">
                <button class="t-btn" onclick="sendMsg()">â†—ï¸</button>
            </div>
        </div>

        <div class="workspace">
            <div id="editor" contenteditable="true" spellcheck="false">
                <h2>Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠØ©</h2>
                <p>Ø§Ø¨Ø¯Ø£ Ø¨ÙƒØªØ§Ø¨Ø© ØªÙ‚Ø±ÙŠØ±Ùƒ Ø£Ùˆ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ù‡Ù†Ø§...</p>
            </div>
            <div id="slash-menu">
                <div class="slash-item" onclick="insert('task')">âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø©</div>
                <div class="slash-item" onclick="insert('table')">ğŸ“Š Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„</div>
                <div class="slash-item" onclick="saveDoc()">ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„</div>
            </div>
        </div>
    </div>

    <footer>
        <div>ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨ÙˆØ§Ø³Ø·Ø©: <b>Hatim Ait Ijjou</b></div>
        <div id="char-count">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙˆÙ: 0</div>
    </footer>

    <script>
        let currentUser = "";
        const editor = document.getElementById('editor');
        const menu = document.getElementById('slash-menu');

        function login() {
            const name = document.getElementById('user-name').value;
            const pass = document.getElementById('pass').value;
            if(name.length > 1 && pass === "1234") {
                currentUser = name;
                document.getElementById('login-screen').style.display = 'none';
            } else { alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³Ù…Ùƒ ÙˆÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„ØµØ­ÙŠØ­Ø©"); }
        }

        function toggleChat() {
            const chat = document.getElementById('chat-sidebar');
            const btn = document.getElementById('chat-toggle');
            if(chat.style.display === "none") {
                chat.style.display = "flex";
                btn.innerText = "ğŸ’¬ Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©";
            } else {
                chat.style.display = "none";
                btn.innerText = "ğŸ’¬ Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©";
            }
        }

        function sendMsg() {
            const input = document.getElementById('chat-input');
            if(input.value.trim() !== "") {
                const msgDiv = document.createElement('div');
                msgDiv.className = "msg";
                msgDiv.innerHTML = `<b>${currentUser}</b> ${input.value}`;
                document.getElementById('chat-messages').appendChild(msgDiv);
                document.getElementById('chat-messages').scrollTop = document.getElementById('chat-messages').scrollHeight;
                input.value = "";
            }
        }

        function f(cmd, val=null) { document.execCommand(cmd, false, val); }

        editor.addEventListener('keyup', (e) => {
            const sel = window.getSelection();
            if (sel.rangeCount > 0) {
                const range = sel.getRangeAt(0);
                const text = range.startContainer.textContent.substring(0, range.startOffset);
                if (text.endsWith('/')) {
                    const rect = range.getBoundingClientRect();
                    menu.style.display = 'block';
                    menu.style.top = (rect.bottom + window.scrollY - 120) + 'px';
                    menu.style.left = rect.left + 'px';
                } else { menu.style.display = 'none'; }
            }
            document.getElementById('char-count').innerText = "Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø±ÙˆÙ: " + editor.innerText.length;
        });

        function insert(type) {
            editor.focus(); document.execCommand('delete', false, null);
            if(type === 'task') f('insertHTML', '<div style="background:#f0fdf4; padding:10px; border-right:4px solid #00ff41; margin:10px 0;">âœ… Ù…Ù‡Ù…Ø© Ù„Ù„ÙØ±ÙŠÙ‚: ...</div><br>');
            if(type === 'table') f('insertHTML', '<table border="1" style="width:100%; border-collapse:collapse; background:white;"><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù…Ù‡Ù…Ø©</th></tr><tr><td>...</td><td>...</td></tr></table><br>');
            menu.style.display = 'none';
        }

        function saveDoc() {
            const blob = new Blob([editor.innerText], {type: "text/plain"});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = "Hatim_Space_Shared.txt"; a.click();
        }

        document.addEventListener('click', (e) => { if(e.target.id !== 'editor') menu.style.display = 'none'; });
    </script>
</body>
</html>
