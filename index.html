<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatim OS Infinity - Open Source Project</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    
    <style>
        /* --- المظهر العام (يمكن للمطورين تعديله من هنا) --- */
        :root {
            --primary: #ff0055;
            --bg-dark: #0a0a0a;
            --glass: rgba(25, 25, 25, 0.9);
            --border: rgba(255, 255, 255, 0.1);
        }

        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: var(--bg-dark); font-family: 'Segoe UI', sans-serif; color: white; }

        /* --- شاشة تسجيل الدخول --- */
        #login-screen {
            position: fixed; inset: 0; z-index: 1000;
            background: linear-gradient(45deg, #000, #1a0008);
            display: flex; align-items: center; justify-content: center;
        }

        .login-card {
            background: var(--glass); padding: 40px; border-radius: 20px;
            border: 1px solid var(--border); text-align: center; width: 350px;
        }

        .login-card input {
            width: 100%; padding: 12px; margin: 10px 0; border-radius: 8px;
            border: none; background: #222; color: white; text-align: center;
        }

        .login-card button {
            width: 100%; padding: 12px; background: var(--primary);
            border: none; color: white; border-radius: 8px; cursor: pointer; font-weight: bold;
        }

        /* --- سطح المكتب --- */
        #desktop {
            position: relative; height: 100vh; width: 100vw;
            background: url('https://w.wallhaven.cc/full/85/wallhaven-85m7qy.jpg') center/cover;
            display: none; /* يظهر بعد تسجيل الدخول */
        }

        .app-grid { display: grid; grid-template-columns: repeat(auto-fill, 110px); gap: 20px; padding: 40px; }
        
        .app-item { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .app-item i { font-size: 40px; color: var(--primary); margin-bottom: 8px; }

        /* --- النوافذ --- */
        .window {
            position: absolute; width: 600px; height: 450px;
            background: var(--glass); backdrop-filter: blur(20px);
            border-radius: 15px; border: 1px solid var(--border);
            display: flex; flex-direction: column; overflow: hidden; z-index: 10;
        }

        .window-header { padding: 15px; background: rgba(255,255,255,0.05); display: flex; justify-content: space-between; cursor: move; }
        .window-body { flex: 1; position: relative; }
        iframe { width: 100%; height: 100%; border: none; background: white; }

        /* --- شريط المهام --- */
        #taskbar {
            position: fixed; bottom: 0; width: 100%; height: 50px;
            background: rgba(0,0,0,0.8); display: flex; align-items: center;
            padding: 0 20px; border-top: 1px solid var(--border);
        }
    </style>
</head>
<body onload="OS.init()">

    <div id="login-screen">
        <div class="login-card">
            <h2 id="login-title">Hatim OS Infinity</h2>
            <p style="opacity: 0.6; font-size: 12px;">Open Source Project</p>
            <input type="text" id="username" placeholder="Username (حاتم)">
            <input type="password" id="password" placeholder="Password (1234)">
            <button onclick="OS.authenticate()">Login</button>
            <p style="font-size: 10px; margin-top: 15px; color: #666;">Developer Mode: Enabled</p>
        </div>
    </div>

    <div id="desktop">
        <div class="app-grid" id="app-grid"></div>
        <div id="window-manager"></div>
        <div id="taskbar">
            <i class="fas fa-microchip" style="color:var(--primary); font-size: 24px;"></i>
            <span id="clock" style="margin-left: auto; font-family: monospace;">00:00</span>
        </div>
    </div>

    <script>
        /* --- Hatim OS Kernel (Open Source Edition) ---
           يمكن للمطورين التعديل على المصفوفة بالأسفل لإضافة تطبيقات جديدة بسهولة.
        */

        const OS = {
            isLoggedIn: false,
            zIndex: 100,

            // مصفوفة التطبيقات (سهلة التعديل للمطورين)
            apps: [
                { id: 'browser', name: 'المتصفح', icon: 'fa-globe', url: 'https://www.bing.com' },
                { id: 'terminal', name: 'Terminal', icon: 'fa-terminal', content: '<h2>Hatim OS Terminal</h2><p>Type "help" for commands...</p>' },
                { id: 'editor', name: 'الكود', icon: 'fa-code', url: 'https://codesandbox.io' },
                { id: 'settings', name: 'الإعدادات', icon: 'fa-sliders', content: '<p>إصدار مفتوح المصدر 1.0.0</p>' }
            ],

            init() {
                this.updateClock();
                setInterval(() => this.updateClock(), 1000);
                this.renderApps();
            },

            updateClock() {
                const now = new Date();
                document.getElementById('clock').innerText = now.toLocaleTimeString();
            },

            authenticate() {
                const user = document.getElementById('username').value;
                const pass = document.getElementById('password').value;

                // نظام دخول بسيط (يمكن تطويره لربطه بـ Firebase)
                if(user !== "" && pass === "1234") {
                    document.getElementById('login-screen').style.display = 'none';
                    document.getElementById('desktop').style.display = 'block';
                    this.isLoggedIn = true;
                } else {
                    alert("البيانات خاطئة (جرب أي مستخدم وكلمة 1234)");
                }
            },

            renderApps() {
                const grid = document.getElementById('app-grid');
                this.apps.forEach(app => {
                    const el = document.createElement('div');
                    el.className = 'app-item';
                    el.onclick = () => this.launchApp(app);
                    el.innerHTML = `<i class="fas ${app.icon}"></i><span>${app.name}</span>`;
                    grid.appendChild(el);
                });
            },

            launchApp(app) {
                if(document.getElementById('win-' + app.id)) return;

                const win = document.createElement('div');
                win.className = 'window';
                win.id = 'win-' + app.id;
                win.style.top = '100px'; win.style.left = '150px';
                win.style.zIndex = ++this.zIndex;

                win.innerHTML = `
                    <div class="window-header" onmousedown="OS.drag(event, this)">
                        <span>${app.name}</span>
                        <i class="fas fa-times" onclick="OS.closeApp('${app.id}')" style="cursor:pointer; color:red;"></i>
                    </div>
                    <div class="window-body">
                        ${app.url ? `<iframe src="${app.url}"></iframe>` : `<div style="padding:20px;">${app.content}</div>`}
                    </div>`;

                document.getElementById('window-manager').appendChild(win);
            },

            closeApp(id) {
                document.getElementById('win-' + id).remove();
            },

            drag(e, header) {
                const win = header.parentElement;
                win.style.zIndex = ++this.zIndex;
                let ox = e.clientX - win.offsetLeft;
                let oy = e.clientY - win.offsetTop;

                document.onmousemove = (ev) => {
                    win.style.left = ev.clientX - ox + "px";
                    win.style.top = ev.clientY - oy + "px";
                };

                document.onmouseup = () => document.onmousemove = null;
            }
        };
    </script>
</body>
</html>
