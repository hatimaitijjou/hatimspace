<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>HATIM SPACE | Ultimate AI Writer</title>
    <style>
        :root { --primary: #00ff41; --bg: #0a0a0a; --page: #ffffff; }
        .theme-sky { --primary: #00d4ff; --bg: #001524; }
        .theme-fire { --primary: #ff4d4d; --bg: #1a0000; }

        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; height: 100vh; transition: 0.5s; overflow: hidden; }
        
        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø£Ø¯ÙˆØ§Øª */
        .toolbar { background: #161616; padding: 12px; display: flex; gap: 10px; border-bottom: 1px solid #333; align-items: center; z-index: 100; }
        .t-btn { background: #222; border: 1px solid #444; color: white; padding: 8px 15px; border-radius: 8px; cursor: pointer; font-weight: bold; }
        .t-btn:hover { border-color: var(--primary); color: var(--primary); }

        .main { flex: 1; display: flex; overflow: hidden; }
        
        /* Ø§Ù„Ù…Ø­Ø±Ø± (Ø§Ù„Ø°ÙƒØ§Ø¡ ÙŠÙƒØªØ¨ Ù‡Ù†Ø§) */
        .editor-zone { flex: 1; padding: 40px; overflow-y: auto; display: flex; justify-content: center; position: relative; }
        #editor { width: 100%; max-width: 800px; min-height: 1000px; background: var(--page); color: #222; padding: 60px; border-radius: 12px; outline: none; font-size: 19px; line-height: 1.8; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³Ù„Ø§Ø´ Ø§Ù„Ø°ÙƒÙŠØ© */
        #slash-menu { position: absolute; background: #1a1a1a; border: 1px solid var(--primary); border-radius: 10px; width: 260px; display: none; z-index: 1000; padding: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
        .slash-item { padding: 12px; cursor: pointer; border-radius: 7px; color: #eee; transition: 0.2s; display: flex; align-items: center; gap: 10px; font-size: 14px; }
        .slash-item:hover { background: var(--primary); color: black; font-weight: bold; }

        /* Ø´Ø§Øª HATIM AI Ù„Ù„Ø¯Ø±Ø¯Ø´Ø© */
        .ai-chat { width: 320px; background: #111; border-right: 1px solid #333; display: flex; flex-direction: column; }
        #chat-messages { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px; border-radius: 10px; font-size: 14px; background: #222; border-right: 4px solid var(--primary); color: #eee; }
        .msg b { color: var(--primary); display: block; margin-bottom: 5px; font-size: 11px; }
    </style>
</head>
<body>

    <header class="toolbar">
        <div style="color: var(--primary); font-weight: bold; font-size: 1.2rem; margin-left: 20px;">HATIM SPACE OS</div>
        <button class="t-btn" onclick="exec('bold')">B</button>
        <button class="t-btn" onclick="exec('italic')">I</button>
        <input type="color" onchange="exec('foreColor', this.value)" title="ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ø¬Ù…Ù„Ø©" style="width:30px; border:none; background:none; cursor:pointer;">
        
        <select class="t-btn" onchange="document.body.className = this.value" style="margin-right: auto;">
            <option value="">ğŸŸ¢ Ù†ÙŠÙˆÙ†</option>
            <option value="theme-sky">ğŸ”µ Ø³Ù…Ø§Ø¡</option>
            <option value="theme-fire">ğŸ”´ Ù†Ø§Ø±</option>
        </select>
    </header>

    <div class="main">
        <div class="ai-chat">
            <div style="padding:15px; background: #1a1a1a; font-weight:bold; color: var(--primary); border-bottom: 1px solid #333;">ğŸ¤– HATIM AI CHAT</div>
            <div id="chat-messages"></div>
            <div style="padding:15px; border-top: 1px solid #333;">
                <input type="text" id="chat-input" placeholder="Ø¯Ø±Ø¯Ø´ Ù…Ø¹ Ø§Ù„Ø°ÙƒØ§Ø¡..." onkeypress="if(event.key==='Enter') chatWithAI()" style="width:100%; padding:10px; background:#000; border:1px solid #444; color:white; border-radius:8px; outline:none;">
            </div>
        </div>

        <div class="editor-zone">
            <div id="editor" contenteditable="true" spellcheck="false">
                <h1>Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙŠØ§ Ù‚Ø§Ø¦Ø¯ ğŸš€</h1>
                <p>Ø§ÙƒØªØ¨ <b>/</b> Ù„ØªØ¬Ø¹Ù„ HATIM AI ÙŠÙƒØªØ¨ Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù†Ùƒ Ø£Ùˆ ÙŠØºÙŠØ± Ø§Ù„ØªÙ†Ø³ÙŠÙ‚...</p>
            </div>
            
            <div id="slash-menu">
                <div class="slash-item" onclick="aiAction('write_para')">âœï¸ Ø§Ø·Ù„Ø¨ Ù…Ù† AI ÙƒØªØ§Ø¨Ø© ÙÙ‚Ø±Ø©</div>
                <div class="slash-item" onclick="aiAction('write_code')">ğŸ’» Ø§Ø·Ù„Ø¨ Ù…Ù† AI ÙƒØªØ§Ø¨Ø© ÙƒÙˆØ¯</div>
                <div class="slash-item" onclick="ins('h1')">ğŸ“ Ø¹Ù†ÙˆØ§Ù† Ø£Ø³Ø·ÙˆØ±ÙŠ</div>
                <div class="slash-item" onclick="ins('todo')">âœ… Ù‚Ø§Ø¦Ù…Ø© Ù…Ù‡Ø§Ù…</div>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script>
        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† ØµÙˆØ±ØªÙƒ
        const firebaseConfig = {
          apiKey: "AIzaSyBYW9x3xQvcZugc0mJx5iFbByPtGkXNx4M",
          authDomain: "hatim-space-4f7e8.firebaseapp.com",
          projectId: "hatim-space-4f7e8",
          databaseURL: "https://hatim-space-4f7e8-default-rtdb.firebaseio.com",
          storageBucket: "hatim-space-4f7e8.firebasestorage.app",
          messagingSenderId: "1014020499692",
          appId: "1:1014020499692:web:37e023621b0ff9ee59ddc9"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function exec(cmd, val = null) { document.execCommand(cmd, false, val); }

        const editor = document.getElementById('editor');
        const menu = document.getElementById('slash-menu');

        // Ù…ÙŠØ²Ø© Ø§Ù„Ø³Ù„Ø§Ø´ (Slash)
        editor.addEventListener('keyup', (e) => {
            const sel = window.getSelection();
            if(sel.rangeCount > 0) {
                const range = sel.getRangeAt(0);
                const text = range.startContainer.textContent.slice(0, range.startOffset);
                if(text.endsWith('/')) {
                    const rect = range.getBoundingClientRect();
                    menu.style.display = 'block';
                    menu.style.top = (rect.bottom + window.scrollY - 80) + 'px';
                    menu.style.left = rect.left + 'px';
                } else { menu.style.display = 'none'; }
            }
        });

        // Ù…ÙŠØ²Ø©: Ø§Ù„Ø°ÙƒØ§Ø¡ ÙŠÙƒØªØ¨ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø­Ø±Ø±
        function aiAction(type) {
            menu.style.display = 'none';
            exec('delete'); // Ø­Ø°Ù Ø§Ù„Ø³Ù„Ø§Ø´
            const loading = "... Ø¬Ø§Ø±ÙŠ ØªÙÙƒÙŠØ± HATIM AI ...";
            exec('insertHTML', `<span id="ai-loading" style="color:var(--primary)">${loading}</span>`);
            
            setTimeout(() => {
                const loader = document.getElementById('ai-loading');
                if(loader) loader.remove();
                
                let content = "";
                if(type === 'write_para') content = "Ù‡Ø°Ù‡ ÙÙ‚Ø±Ø© Ø£Ø³Ø·ÙˆØ±ÙŠØ© ÙƒØªØ¨Ù‡Ø§ HATIM SPACE AI Ù„ØªÙˆØ¶ÙŠØ­ Ù‚ÙˆØ© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ ÙÙŠ Ù…Ø´Ø±ÙˆØ¹Ùƒ Ø§Ù„Ø¬Ø¯ÙŠØ¯. Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ Ù„ÙŠØ³ Ù„Ù‡ Ø­Ø¯ÙˆØ¯!";
                if(type === 'write_code') content = '<pre style="background:#222; color:#00ff41; padding:15px; border-radius:8px;">function hatimPower() {\n  console.log("HATIM SPACE IS LIVE!");\n}</pre>';
                
                exec('insertHTML', content);
            }, 1500);
        }

        // Ù…ÙŠØ²Ø©: Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø­ÙŠØ© Ù…Ø¹ AI
        function chatWithAI() {
            const input = document.getElementById('chat-input');
            const box = document.getElementById('chat-messages');
            if(!input.value) return;

            // Ø¥Ø¶Ø§ÙØ© Ø±Ø³Ø§Ù„ØªÙƒ
            box.innerHTML += `<div class="msg" style="border-right-color:#555"><b>Ø£Ù†Øª</b> ${input.value}</div>`;
            
            // Ø±Ø¯ HATIM AI
            setTimeout(() => {
                box.innerHTML += `<div class="msg"><b>ğŸ¤– HATIM AI</b> Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø© ÙˆØ§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø¯Ø§Ø®Ù„ Ù…Ø³Ø§Ø­ØªÙƒ Ø§Ù„Ø£Ø³Ø·ÙˆØ±ÙŠØ©.</div>`;
                box.scrollTop = box.scrollHeight;
            }, 800);
            
            input.value = "";
        }

        function ins(t) {
            menu.style.display = 'none';
            exec('delete');
            if(t === 'h1') exec('formatBlock', 'H1');
            if(t === 'todo') exec('insertHTML', '<div><input type="checkbox"> Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</div>');
        }
    </script>
</body>
</html>
