<!DOCTYPE html>
<html lang="ar" dir="rtl" id="os-root">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hatim OS Infinity - Global Edition v2.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <style>
        :root {
            --accent: #00f2ff; --bg: #050505; --glass: rgba(15, 15, 15, 0.95);
            --border: rgba(0, 242, 255, 0.2); --shadow: 0 0 30px rgba(0, 242, 255, 0.2);
        }
        * { box-sizing: border-box; transition: 0.3s; }
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; color: white; }

        /* Ø´Ø§Ø´Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ© */
        #login-screen {
            position: fixed; inset: 0; z-index: 10000;
            background: radial-gradient(circle at center, #111, #000);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .login-card { background: var(--glass); padding: 40px; border-radius: 25px; border: 1px solid var(--border); text-align: center; box-shadow: var(--shadow); width: 350px; }
        
        /* Ø³Ø·Ø­ Ø§Ù„Ù…ÙƒØªØ¨ */
        #desktop {
            position: relative; height: 100vh; width: 100vw;
            background: url('https://w.wallhaven.cc/full/85/wallhaven-85m7qy.jpg') center/cover;
            display: none;
        }
        .app-grid { display: grid; grid-template-columns: repeat(auto-fill, 110px); gap: 20px; padding: 40px; }
        .app-card { display: flex; flex-direction: column; align-items: center; cursor: pointer; text-align: center; }
        .app-icon { width: 65px; height: 65px; border-radius: 18px; display: flex; align-items: center; justify-content: center; font-size: 30px; margin-bottom: 8px; box-shadow: 0 10px 20px rgba(0,0,0,0.5); }

        /* Ø§Ù„Ù†ÙˆØ§ÙØ° Ø§Ù„Ø¹ØµØ±ÙŠØ© */
        .window {
            position: absolute; width: 700px; height: 500px;
            background: var(--glass); backdrop-filter: blur(25px);
            border-radius: 20px; border: 1px solid var(--border);
            display: flex; flex-direction: column; box-shadow: var(--shadow); overflow: hidden; z-index: 10;
        }
        .win-header { padding: 15px 20px; background: rgba(255,255,255,0.03); display: flex; justify-content: space-between; align-items: center; cursor: move; }
        .win-body { flex: 1; position: relative; }
        iframe { width: 100%; height: 100%; border: none; }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ */
        #taskbar {
            position: fixed; bottom: 15px; left: 50%; transform: translateX(-50%);
            background: rgba(10,10,10,0.8); backdrop-filter: blur(20px);
            padding: 8px 30px; border-radius: 40px; display: flex; gap: 20px; align-items: center; border: 1px solid var(--border); z-index: 9999;
        }
        .dock-tool { font-size: 24px; color: var(--accent); cursor: pointer; }
    </style>
</head>
<body onload="System.boot()">

    <div id="login-screen">
        <div class="login-card">
            <h1 style="letter-spacing: 5px; color: var(--accent);">HATIM OS</h1>
            <p style="opacity: 0.5;">Global Open Source Edition</p>
            <input type="text" id="user-name" placeholder="User Name" style="width:100%; padding:12px; margin:15px 0; border-radius:10px; border:none; background:#222; color:white; text-align:center;">
            <input type="password" id="user-pass" placeholder="Password (1234)" style="width:100%; padding:12px; margin-bottom:20px; border-radius:10px; border:none; background:#222; color:white; text-align:center;">
            <button onclick="System.login()" style="width:100%; padding:12px; border-radius:10px; border:none; background:var(--accent); color:black; font-weight:bold; cursor:pointer;">START SESSION</button>
        </div>
    </div>

    <div id="desktop">
        <div class="app-grid" id="main-grid"></div>
        <div id="window-manager"></div>

        <div id="taskbar">
            <i class="fas fa-th-large dock-tool" title="Start" onclick="System.openApp('store')"></i>
            <div id="dock-apps" style="display:flex; gap:15px;"></div>
            <div style="width:1px; height:25px; background:var(--border)"></div>
            <div id="clock" style="font-weight:bold; font-family:monospace;">00:00</div>
            <i class="fas fa-globe dock-tool" onclick="System.toggleLang()"></i>
        </div>
    </div>

    <script>
        const System = {
            lang: 'ar', z: 100,
            apps: {
                'browser': { name: {ar:'Ø§Ù„Ù…ØªØµÙØ­', en:'Browser'}, icon:'fa-globe', bg:'#4285f4', url:'https://www.bing.com' },
                'camera': { name: {ar:'Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§', en:'Camera'}, icon:'fa-camera', bg:'#ff0055', special:'cam' },
                'maps': { name: {ar:'Ø§Ù„Ø®Ø±Ø§Ø¦Ø·', en:'Maps'}, icon:'fa-map-marked-alt', bg:'#34a853', url:'https://www.google.com/maps/embed' },
                'youtube': { name: {ar:'ÙŠÙˆØªÙŠÙˆØ¨', en:'YouTube'}, icon:'fa-play', bg:'#ff0000', url:'https://www.youtube.com/embed' },
                'paint': { name: {ar:'Ø§Ù„Ø±Ø³Ø§Ù…', en:'Paint'}, icon:'fa-paint-brush', bg:'#e91e63', url:'https://jspaint.app' },
                'calc': { name: {ar:'Ø§Ù„Ø­Ø§Ø³Ø¨Ø©', en:'Calculator'}, icon:'fa-calculator', bg:'#ff9800', url:'https://www.google.com/search?q=calculator&igu=1' },
                'store': { name: {ar:'Ø§Ù„Ù…ØªØ¬Ø±', en:'Store'}, icon:'fa-shopping-cart', bg:'#00f2ff', special:'store' },
                'chat': { name: {ar:'Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©', en:'Global Chat'}, icon:'fa-comments', bg:'#9c27b0', content:'<h1>Ù‚Ø±ÙŠØ¨Ø§Ù‹...</h1>' },
                'code': { name: {ar:'Ø§Ù„Ù…Ø­Ø±Ø±', en:'Code Editor'}, icon:'fa-code', bg:'#212121', url:'https://codesandbox.io/embed' },
                'weather': { name: {ar:'Ø§Ù„Ø·Ù‚Ø³', en:'Weather'}, icon:'fa-cloud-sun', bg:'#03a9f4', url:'https://web.meteo.gov.ma/' },
                'files': { name: {ar:'Ù…Ù„ÙØ§ØªÙŠ', en:'My Files'}, icon:'fa-folder-open', bg:'#ffca28', content:'ğŸ“‚ Desktop<br>ğŸ“‚ Documents' },
                'settings': { name: {ar:'Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª', en:'Settings'}, icon:'fa-cog', bg:'#607d8b', special:'settings' }
            },

            boot() {
                this.updateClock();
                setInterval(() => this.updateClock(), 1000);
                this.renderIcons();
            },

            updateClock() {
                document.getElementById('clock').innerText = new Date().toLocaleTimeString('en-GB', {hour:'2-digit', minute:'2-digit'});
            },

            login() {
                const p = document.getElementById('user-pass').value;
                if(p === '1234' || p === '') {
                    document.getElementById('login-screen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('login-screen').style.display = 'none';
                        document.getElementById('desktop').style.display = 'block';
                    }, 500);
                } else { alert("Pass: 1234"); }
            },

            renderIcons() {
                const grid = document.getElementById('main-grid');
                grid.innerHTML = "";
                Object.keys(this.apps).forEach(key => {
                    const app = this.apps[key];
                    grid.innerHTML += `
                        <div class="app-card" onclick="System.openApp('${key}')">
                            <div class="app-icon" style="background:${app.bg}"><i class="fas ${app.icon}"></i></div>
                            <span>${app.name[this.lang]}</span>
                        </div>`;
                });
            },

            openApp(key) {
                if(document.getElementById('win-'+key)) return;
                const app = this.apps[key];
                const win = document.createElement('div');
                win.className = "window"; win.id = 'win-'+key;
                win.style.zIndex = ++this.z; win.style.top = "50px"; win.style.left = "100px";
                
                win.innerHTML = `
                    <div class="win-header" onmousedown="System.drag(event, this)">
                        <span><i class="fas ${app.icon}"></i> ${app.name[this.lang]}</span>
                        <i class="fas fa-times" onclick="System.closeApp('${key}')" style="cursor:pointer; color:#ff5f56;"></i>
                    </div>
                    <div class="win-body">
                        ${app.url ? `<iframe src="${app.url}"></iframe>` : `<div style="padding:20px;">${app.content || 'System App'}</div>`}
                    </div>`;
                document.getElementById('window-manager').appendChild(win);
            },

            closeApp(key) { document.getElementById('win-'+key).remove(); },

            toggleLang() {
                this.lang = this.lang === 'ar' ? 'en' : 'ar';
                document.getElementById('os-root').dir = this.lang === 'ar' ? 'rtl' : 'ltr';
                this.renderIcons();
            },

            drag(e, header) {
                const win = header.parentElement; win.style.zIndex = ++this.zIndex;
                let ox = e.clientX - win.offsetLeft, oy = e.clientY - win.offsetTop;
                document.onmousemove = (ev) => { win.style.left = ev.clientX - ox + "px"; win.style.top = ev.clientY - oy + "px"; };
                document.onmouseup = () => document.onmousemove = null;
            }
        };
    </script>
</body>
</html>
